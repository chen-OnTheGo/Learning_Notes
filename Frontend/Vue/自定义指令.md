
自己定义的指令，可以封装一些 dom 操作，扩展额外功能。


## 语法

-  全局注册
-  局部注册

注册好以后，标签当中就直接用 `v-指令名` 来使用指令。


### 全局注册

语法：
```
Vue.directive('指令名', {
	"inserted" (el){
		//el是指令绑定的元素
		//可以对el标签，扩展额外的功能
	}
})
```

关于这个 `inserted` 函数在Vue生命周期的哪一段，请看 [Vue生命周期](Vue%20生命周期.md#^5e7968)。


### 局部注册

语法：
```
directives:{
	"指令名": {
		inserted(el){
			//可以对el标签扩展额外功能
		}
	}
}
```



## 设置自定义指令的值

假如我们想要自定义一种可以改变标签内容字体颜色的指令，不同文本设置的颜色可以不同，也可以在渲染后改变文本的值。

这里咱们用局部注册：
```
<template>
  <div>
    <h1 v-color="color1">指令的值1测试</h1>
    <h1 v-color="color2">指令的值2测试</h1>
  </div>
</template>

<script>
export default {
  data () {
    return {
      color1: 'pink',
      color2: 'green'
    }
  },
  directives: {
    "color": {
      inserted(el, binding){
        el.style.color = building.value;
      },
      update(el, binding){
        el.style.color = building.value;
      }
    }
  }
}
</script>
```



这里由于两个文本颜色不同，所以用变量 `color1`和 `color2` 来表示相应的值。这里的 `binding.value` 就是指令的值。可以看到局部注册里面的两个函数：

- inserted：提供元素被添加到页面中时的逻辑，相当于初始化。
- [update](Vue%20生命周期.md#^903219)：是钩子函数，当指令的值被修改时触发，提供值变化后，dom更新的逻辑。相当于初始化后，更新时的触发。


![](../../img/Pasted%20image%2020250309205530.png)


## 进阶

封装 [v-loading 指令](v-loading%20指令封装.md)。